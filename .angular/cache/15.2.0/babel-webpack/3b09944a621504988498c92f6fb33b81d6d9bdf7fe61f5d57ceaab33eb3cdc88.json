{"ast":null,"code":"import { Funcionarios, PcfCaracterizacaoCrianca, PcfRespostaIndicadores, PcfCaracterizacaoGestante, PcfPlanoVisita, FormularioPesquisa } from '../models/Modelo';\nimport { Mentor } from '../models/Mentor';\nimport { Escola } from './Modelo';\nexport class Controlador {\n  inicializaDiagnostico(diagnostico, servidor) {\n    for (var d = 0; d < diagnostico.length; d++) {\n      if (diagnostico[d].codigo == 0 || typeof diagnostico[d].codigo == \"undefined\") diagnostico[d].responsavelCadastro = servidor;\n      diagnostico[d].responsavelAlteracao = servidor;\n      diagnostico[d].tipo = 1;\n      diagnostico[d].dataDiagnostico = new Date();\n    }\n  }\n  inicializaAvaliacao(diagnostico, servidor) {\n    for (var d = 0; d < diagnostico.length; d++) {\n      if (diagnostico[d].codigo == 0 || typeof diagnostico[d].codigo == \"undefined\") diagnostico[d].visitador = servidor;\n      diagnostico[d].supervisor = servidor;\n      diagnostico[d].tipo = 1;\n      diagnostico[d].dataAvaliacao = new Date();\n    }\n  }\n  inicializaCrianca(crianca, servidor) {\n    if (crianca.codigo == 0 || typeof crianca.codigo == \"undefined\") crianca.responsavelCadastro = servidor;\n    crianca.responsavelAlteracao = servidor;\n  }\n  retornaQuestionariosRespondidos(respondidos, questionarios) {\n    var retorno = new Array(questionarios.length);\n    if (respondidos != null) {\n      for (var r = 0; r < respondidos.length; r++) {\n        if (questionarios != null) for (var x = 0; x < questionarios.length; x++) if (respondidos[r].formulario.codigo == questionarios[x].codigo) retorno[x] = respondidos[r];\n      }\n    }\n    return retorno;\n  }\n  naFaixa(inicio, fim, date1) {\n    if (typeof date1 === 'string') date1 = new Date(date1);\n    inicio = inicio * 30;\n    inicio = inicio + 1;\n    fim = fim * 30;\n    var date2 = new Date();\n    var timeDiff = Math.abs(date2.getTime() - date1.getTime());\n    var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n    if (diffDays >= inicio && diffDays <= fim) return false;else return false;\n  }\n  /*validaca\n      public valida(selects: IonSelect[], inputs: IonInput[]) {\n          if (selects != null) {\n              for (var x: number = 0; x < selects.length; x++) {\n                  if(document.getElementById(selects[x].id).parentElement.id != \"ignora\" )\n                  if (selects[x].value == \"\" || selects[x].value == \"0\") {\n                      alert(document.getElementById(selects[x]._labelId).innerHTML + \" tem de ser preenchido\");\n                      selects[x].open();\n                      return false;\n                  }\n              }\n          }\n          if (inputs != null) {\n              for (var x: number = 0; x < inputs.length; x++) {\n                  if (inputs[x].value == \"\" || inputs[x].value == \"0\") {\n                      alert(document.getElementById(inputs[x]._labelId).innerHTML + \" tem de ser preenchido\");\n                      inputs[x].setFocus();\n                      return false;\n                  }\n              }\n          }\n  \n          return true;\n      }\n      */\n  enderecoCompleto(dom) {\n    var retorno = \"\";\n    if (dom.tipo_logradouro != null) {\n      retorno = dom.tipo_logradouro + \" \";\n    }\n    if (dom.endereco != null) {\n      retorno = retorno + dom.endereco + \", \";\n    }\n    if (dom.numero != null) {\n      retorno = retorno + \"N - \" + dom.numero.replace(\",0\", \"\") + \", \";\n    }\n    return retorno;\n  }\n  idade(date1) {\n    if (typeof date1 === 'string') date1 = new Date(date1);\n    var date2 = new Date();\n    var timeDiff = Math.abs(date2.getTime() - date1.getTime());\n    var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n    var anos = diffDays / 365 >> 0;\n    var resto = diffDays % 365;\n    var meses = resto / 30 >> 0;\n    resto = resto % 30;\n    return anos + \" anos \" + meses + \" meses e \" + resto + \" dias \";\n  }\n  formataData(dt) {\n    if (typeof dt === 'string') dt = new Date(dt);\n    var retorno = \"\";\n    retorno = dt.getDate() + \"\";\n    if (dt.getDate() < 10) retorno = \"0\" + retorno;\n    retorno = retorno + \"/\";\n    var mes = dt.getMonth() + 1;\n    if (mes < 10) retorno = retorno + \"0\";\n    retorno = retorno + mes + \"/\" + dt.getFullYear();\n    return retorno;\n  }\n  //aqui\n  salvaRaizCrianca(crianca, store, nav) {\n    store.get(\"criancas\").then(raizes => {\n      raizes[crianca.ionicIndiceRepositorio] = crianca;\n      store.set(\"criancas\", raizes);\n      //if (nav != null)\n      //nav.pop();\n    });\n  }\n  //aqui\n  salvaRaizGestante(gestante, store, nav) {\n    store.get(\"gestantes\").then(raizes => {\n      raizes[gestante.ionicIndiceRepositorio] = gestante;\n      store.set(\"gestantes\", raizes);\n      if (nav != null) this.nav.navigateByUrl(\"/\");\n    });\n  }\n  achaPlanoVisitaCrianca(crianca, planos) {\n    if (PcfPlanoVisita != null) for (var p = 0; p < planos.length; p++) if (planos[p].familias != null) for (var f = 0; f < planos[p].familias.length; f++) if (planos[p].familias[f].familia != null && planos[p].familias[f].familia.criancas != null) for (var c = 0; c < planos[p].familias[f].familia.criancas.length; c++) if (planos[p].familias[f].familia.criancas[c].codigo == crianca.codigo) return planos[p];\n  }\n  achaPlanoVisitaGestante(gestante, planos) {\n    if (PcfPlanoVisita != null) for (var p = 0; p < planos.length; p++) if (planos[p].familias != null) for (var f = 0; f < planos[p].familias.length; f++) if (planos[p].familias[f].familia != null && planos[p].familias[f].familia.gestantes != null) for (var c = 0; c < planos[p].familias[f].familia.gestantes.length; c++) if (planos[p].familias[f].familia.gestantes[c].codigo == gestante.codigo) return planos[p];\n  }\n  //aqui\n  sincronizaDadosServidor(sto, funcionario, nav) {\n    // envia Dados\n    var supervisores;\n    supervisores = Mentor.executaVisao(1504, \"\");\n    if (supervisores != null) for (var x = 0; x < supervisores.length; x++) supervisores[x] = new Funcionarios(supervisores[x]);\n    sto.set(\"supervisores\", supervisores);\n    // recupera Dados\n    var lescolas = Mentor.executaVisao(440, \"\");\n    if (lescolas != null) for (var x = 0; x < lescolas.length; x++) lescolas[x] = new Escola(lescolas[x]);\n    sto.set(\"escolas\", lescolas);\n    var lrespostas = Mentor.executaVisao(1290, \"\");\n    if (lrespostas != null) for (var x = 0; x < lrespostas.length; x++) lrespostas[x] = new PcfRespostaIndicadores(lrespostas[x]);\n    sto.set(\"respostas\", lrespostas);\n    var lrepform = new Array(20);\n    for (var x = 1; x < 20; x++) {\n      lrepform[x] = new Array();\n    }\n    var lformularios = Mentor.executaVisao(1521, \"\");\n    for (var x = 0; x < lformularios.length; x++) {\n      lformularios[x] = new FormularioPesquisa(lformularios[x]);\n      if (lformularios[x].questoes != null && lformularios[x].questoes.length > 0) lrepform[lformularios[x].tipo].push(lformularios[x]);\n    }\n    for (var d = 0; d < lrepform[9].length; d++) {\n      for (var x = 1; x < 9; x++) {\n        lrepform[x].push(lrepform[9][d]);\n      }\n    }\n    for (var d = 0; d < lrepform[10].length; d++) {\n      for (var x = 11; x < 20; x++) {\n        lrepform[x].push(lrepform[10][d]);\n      }\n    }\n    for (var x = 1; x < 20; x++) {\n      if (x != 9 && x != 10) sto.set(\"formularios\" + x, lrepform[x]);\n    }\n    var planosVisitas = Mentor.executaVisao(1518, \"varcodigo=\" + funcionario.codigo);\n    var criancasServidor = new Array();\n    var gestantesServidor = new Array();\n    if (planosVisitas != null) for (var x = planosVisitas.length - 1; x >= 0; x--) {\n      planosVisitas[x] = new PcfPlanoVisita(planosVisitas[x]);\n      if (planosVisitas[x].familias != null) {\n        for (var f = planosVisitas[x].familias.length - 1; f >= 0; f--) {\n          if (planosVisitas[x].familias[f].familia != null) {\n            if (planosVisitas[x].familias[f].familia.criancas != null) for (var c = 0; c < planosVisitas[x].familias[f].familia.criancas.length; c++) criancasServidor.push(planosVisitas[x].familias[f].familia.criancas[c]);\n            if (planosVisitas[x].familias[f].familia.gestantes != null) for (var c = 0; c < planosVisitas[x].familias[f].familia.gestantes.length; c++) gestantesServidor.push(planosVisitas[x].familias[f].familia.gestantes[c]);\n          } else planosVisitas[x].familias.splice(f, 1);\n        }\n      }\n    }\n    sto.set(\"planos\", planosVisitas);\n    if (criancasServidor != null && criancasServidor.length > 0) sto.get(\"criancas\").then(criancas => {\n      var criancasLocal = criancas;\n      if (criancasLocal == null) criancasLocal = new Array();\n      let codigos = \"0\";\n      for (let c = 0; c < criancasServidor.length; c++) {\n        let achou = false;\n        for (let x = 0; x < criancasLocal.length; x++) if (criancasServidor[c].codigo == criancasLocal[x].codigo) achou = true;\n        if (!achou) codigos = codigos + \", \" + criancasServidor[c].codigo;\n      }\n      if (codigos != \"0\") {\n        criancasServidor = Mentor.executaVisao(1506, \"varcodigo=\" + codigos);\n        for (let c = 0; c < criancasServidor.length; c++) {\n          criancasLocal.push(new PcfCaracterizacaoCrianca(criancasServidor[c]));\n          criancasLocal[criancasLocal.length - 1].associadoCras.domicilioCras.planoVisita = this.achaPlanoVisitaCrianca(criancasServidor[c], planosVisitas);\n        }\n        sto.set(\"criancas\", criancasLocal);\n      }\n    });\n    if (gestantesServidor != null && gestantesServidor.length > 0) sto.get(\"gestantes\").then(gestantes => {\n      var gestanteLocal = gestantes;\n      if (gestanteLocal == null) gestanteLocal = new Array();\n      let codigos = \"0\";\n      for (let c = 0; c < gestantesServidor.length; c++) {\n        let achou = false;\n        for (let x = 0; x < gestanteLocal.length; x++) if (gestantesServidor[c].codigo == gestanteLocal[x].codigo) achou = true;\n        if (!achou) codigos = codigos + \", \" + gestantesServidor[c].codigo;\n      }\n      if (codigos != \"0\") {\n        gestantesServidor = Mentor.executaVisao(1519, \"varcodigo=\" + codigos);\n        for (let c = 0; c < gestantesServidor.length; c++) {\n          gestanteLocal.push(new PcfCaracterizacaoGestante(gestantesServidor[c]));\n          gestanteLocal[gestanteLocal.length - 1].associadoCras.domicilioCras.planoVisita = this.achaPlanoVisitaGestante(gestantesServidor[c], planosVisitas);\n        }\n        sto.set(\"gestantes\", gestanteLocal);\n      }\n    });\n    //if (nav != null)\n    //\tnav.pop();\n  }\n}","map":{"version":3,"mappings":"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","names":["Funcionarios","PcfCaracterizacaoCrianca","PcfRespostaIndicadores","PcfCaracterizacaoGestante","PcfPlanoVisita","FormularioPesquisa","Mentor","Escola","Controlador","inicializaDiagnostico","diagnostico","servidor","d","length","codigo","responsavelCadastro","responsavelAlteracao","tipo","dataDiagnostico","Date","inicializaAvaliacao","visitador","supervisor","dataAvaliacao","inicializaCrianca","crianca","retornaQuestionariosRespondidos","respondidos","questionarios","retorno","Array","r","x","formulario","naFaixa","inicio","fim","date1","date2","timeDiff","Math","abs","getTime","diffDays","ceil","enderecoCompleto","dom","tipo_logradouro","endereco","numero","replace","idade","anos","resto","meses","formataData","dt","getDate","mes","getMonth","getFullYear","salvaRaizCrianca","store","nav","get","then","raizes","ionicIndiceRepositorio","set","salvaRaizGestante","gestante","navigateByUrl","achaPlanoVisitaCrianca","planos","p","familias","f","familia","criancas","c","achaPlanoVisitaGestante","gestantes","sincronizaDadosServidor","sto","funcionario","supervisores","executaVisao","lescolas","lrespostas","lrepform","lformularios","questoes","push","planosVisitas","criancasServidor","gestantesServidor","splice","criancasLocal","codigos","achou","associadoCras","domicilioCras","planoVisita","gestanteLocal"],"sourceRoot":"","sources":["/Users/erisveltonlima/Desktop/Projetos 2023/criancaFeliz2023/src/app/models/Controlador.ts"],"sourcesContent":["import { Storage } from '@ionic/storage';\n//import { Select, TextInput, RadioGroup } from 'ionic-angular';\n//import {  NavController } from 'ionic-angular';\nimport { IonSelect, IonInput} from '@ionic/angular' \nimport { Router } from '@angular/router'\n\nimport { DomicilioCras, Funcionarios, PcfCaracterizacaoCrianca, PcfRespostaIndicadores, PcfCaracterizacaoGestante, PcfPlanoVisita, FormularioPesquisa, pcfAppFormulario } from '../models/Modelo'\nimport { Mentor } from '../models/Mentor'\nimport { Escola } from './Modelo';\n\nexport class Controlador {\n\tnav: Router;\n\n\t\n\tpublic inicializaDiagnostico(diagnostico: any[], servidor: Funcionarios){\n\t\tfor(var d = 0;d<diagnostico.length;d++){\n\t\t\tif(diagnostico[d].codigo==0 || typeof(diagnostico[d].codigo) == \"undefined\")\n\t\t\tdiagnostico[d].responsavelCadastro = servidor;\n\t\tdiagnostico[d].responsavelAlteracao = servidor;\n\t\tdiagnostico[d].tipo = 1;\n\t\tdiagnostico[d].dataDiagnostico = new Date();\n\t\t}\n\t\n\t}\n\n\tpublic inicializaAvaliacao(diagnostico: any[], servidor: Funcionarios){\n\t\tfor(var d = 0;d<diagnostico.length;d++){\n\t\t\tif(diagnostico[d].codigo==0 || typeof(diagnostico[d].codigo) == \"undefined\")\n\t\t\n\t\tdiagnostico[d].visitador = servidor;\n\t\tdiagnostico[d].supervisor = servidor;\n\t\tdiagnostico[d].tipo = 1;\n\t\tdiagnostico[d].dataAvaliacao = new Date();\n\t\t}\n\t\n\t}\n\n\tpublic inicializaCrianca(crianca: any, servidor: Funcionarios){\n\t\t\n\t\t\tif(crianca.codigo==0 || typeof(crianca.codigo) == \"undefined\")\n\t\t\tcrianca.responsavelCadastro = servidor;\n\t\t\tcrianca.responsavelAlteracao = servidor;\n\t\t\n\t}\n\n\tpublic retornaQuestionariosRespondidos(respondidos: pcfAppFormulario[], questionarios: FormularioPesquisa[]) {\n\t\tvar retorno: pcfAppFormulario[] = new Array(questionarios.length);\n\t\tif (respondidos != null) {\n\t\t\tfor (var r = 0; r < respondidos.length; r++) {\n\t\t\t\tif (questionarios != null)\n\t\t\t\t\tfor (var x = 0; x < questionarios.length; x++)\n\t\t\t\t\t\tif (respondidos[r].formulario.codigo == questionarios[x].codigo)\n\t\t\t\t\t\t\tretorno[x] = respondidos[r];\n\t\t\t}\n\t\t}\n\t\treturn retorno;\n\t}\n\n\tpublic naFaixa(inicio: number, fim: number, date1: Date) {\n\n\t\tif(typeof date1 === 'string')\n\t\tdate1 = new Date(date1);\n\n\t\tinicio = inicio * 30;\n\t\tinicio = inicio + 1;\n\n\t\tfim = fim * 30;\n\n\t\tvar date2 = new Date();\n\n\t\tvar timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\t\tvar diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\n\t\tif (diffDays >= inicio && diffDays <= fim)\n\t\t\treturn false;\n\t\telse\n\t\t\treturn false;\n\n\t}\n/*validaca\n\tpublic valida(selects: IonSelect[], inputs: IonInput[]) {\n\t\tif (selects != null) {\n\t\t\tfor (var x: number = 0; x < selects.length; x++) {\n\t\t\t\tif(document.getElementById(selects[x].id).parentElement.id != \"ignora\" )\n\t\t\t\tif (selects[x].value == \"\" || selects[x].value == \"0\") {\n\t\t\t\t\talert(document.getElementById(selects[x]._labelId).innerHTML + \" tem de ser preenchido\");\n\t\t\t\t\tselects[x].open();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (inputs != null) {\n\t\t\tfor (var x: number = 0; x < inputs.length; x++) {\n\t\t\t\tif (inputs[x].value == \"\" || inputs[x].value == \"0\") {\n\t\t\t\t\talert(document.getElementById(inputs[x]._labelId).innerHTML + \" tem de ser preenchido\");\n\t\t\t\t\tinputs[x].setFocus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\t*/\n\n\tpublic enderecoCompleto(dom: DomicilioCras) {\n\t\tvar retorno = \"\";\n\t\tif (dom.tipo_logradouro != null) {\n\t\t\tretorno = dom.tipo_logradouro + \" \";\n\t\t}\n\t\tif (dom.endereco != null) {\n\t\t\tretorno = retorno + dom.endereco + \", \";\n\t\t}\n\t\tif (dom.numero != null) {\n\t\t\tretorno = retorno + \"N - \" + dom.numero.replace(\",0\", \"\") + \", \";\n\t\t}\n\t\treturn retorno;\n\t}\n\n\tpublic idade(date1: Date) {\n\n\t\tif(typeof date1 === 'string')\n\t\t\tdate1 = new Date(date1);\n\n\t\tvar date2 = new Date();\n\n\t\tvar timeDiff = Math.abs(date2.getTime() - date1.getTime());\n\t\tvar diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));\n\n\t\tvar anos = (diffDays / 365 >> 0);\n\t\tvar resto = diffDays % 365;\n\t\tvar meses = (resto / 30 >> 0);\n\t\tresto = resto % 30;\n\n\t\treturn anos + \" anos \" + meses + \" meses e \" + resto + \" dias \";\n\t}\n\n\tpublic formataData(dt: Date) {\n\n\t\tif(typeof dt === 'string')\n\t\t\tdt = new Date(dt);\n\t\t\t\n\t\tvar retorno = \"\";\n\t\tretorno = dt.getDate() + \"\";\n\t\tif (dt.getDate() < 10)\n\t\t\tretorno = \"0\" + retorno;\n\t\tretorno = retorno + \"/\";\n\t\tvar mes = dt.getMonth() + 1;\n\t\tif (mes < 10)\n\t\t\tretorno = retorno + \"0\";\n\t\tretorno = retorno + mes + \"/\" + dt.getFullYear();\n\n\t\treturn retorno;\n\n\t}\n\n//aqui\n\tsalvaRaizCrianca(crianca: PcfCaracterizacaoCrianca, store: Storage, nav: Router) {\n\t\tstore.get(\"criancas\").then(raizes => {\n\t\t\traizes[crianca.ionicIndiceRepositorio] = crianca\n\t\t\tstore.set(\"criancas\", raizes);\n\t\t\t//if (nav != null)\n\t\t\t\t//nav.pop();\n\t\t});\n\t}\n\n//aqui\n\tsalvaRaizGestante(gestante: PcfCaracterizacaoGestante, store: Storage, nav: Router) {\n\t\tstore.get(\"gestantes\").then(raizes => {\n\t\t\traizes[gestante.ionicIndiceRepositorio] = gestante\n\t\t\tstore.set(\"gestantes\", raizes);\n\t\t\tif (nav != null)\n\t\t\t\tthis.nav.navigateByUrl(\"/\");\n\t\t});\n\t}\n\n\n\tpublic achaPlanoVisitaCrianca(crianca: PcfCaracterizacaoCrianca, planos: PcfPlanoVisita[]) {\n\t\tif (PcfPlanoVisita != null)\n\t\t\tfor (var p = 0; p < planos.length; p++)\n\t\t\t\tif (planos[p].familias != null)\n\t\t\t\t\tfor (var f = 0; f < planos[p].familias.length; f++)\n\t\t\t\t\t\tif (planos[p].familias[f].familia != null && planos[p].familias[f].familia.criancas != null)\n\t\t\t\t\t\t\tfor (var c = 0; c < planos[p].familias[f].familia.criancas.length; c++)\n\t\t\t\t\t\t\t\tif (planos[p].familias[f].familia.criancas[c].codigo == crianca.codigo)\n\t\t\t\t\t\t\t\t\treturn planos[p];\n\n\t}\n\n\tpublic achaPlanoVisitaGestante(gestante: PcfCaracterizacaoGestante, planos: PcfPlanoVisita[]) {\n\t\tif (PcfPlanoVisita != null)\n\t\t\tfor (var p = 0; p < planos.length; p++)\n\t\t\t\tif (planos[p].familias != null)\n\t\t\t\t\tfor (var f = 0; f < planos[p].familias.length; f++)\n\t\t\t\t\t\tif (planos[p].familias[f].familia != null && planos[p].familias[f].familia.gestantes != null)\n\t\t\t\t\t\t\tfor (var c = 0; c < planos[p].familias[f].familia.gestantes.length; c++)\n\t\t\t\t\t\t\t\tif (planos[p].familias[f].familia.gestantes[c].codigo == gestante.codigo)\n\t\t\t\t\t\t\t\t\treturn planos[p];\n\n\t}\n//aqui\n\tpublic sincronizaDadosServidor(sto: Storage, funcionario: Funcionarios, nav: Router) {\n\t\t// envia Dados\n\n\t\tvar supervisores: Funcionarios[];\n\t\tsupervisores =  Mentor.executaVisao(1504, \"\");\n\t\tif (supervisores != null)\n\t\t\tfor (var x: number = 0; x < supervisores.length; x++)\n\t\t\tsupervisores[x] = new Funcionarios(supervisores[x]);\n\t\tsto.set(\"supervisores\", supervisores);\n\n\t\t// recupera Dados\n\t\tvar lescolas: Escola[] = Mentor.executaVisao(440, \"\");\n\t\tif (lescolas != null)\n\t\t\tfor (var x: number = 0; x < lescolas.length; x++)\n\t\t\t\tlescolas[x] = new Escola(lescolas[x]);\n\t\tsto.set(\"escolas\", lescolas);\n\n\n\t\tvar lrespostas: PcfRespostaIndicadores[] = Mentor.executaVisao(1290, \"\");\n\t\tif (lrespostas != null)\n\t\t\tfor (var x: number = 0; x < lrespostas.length; x++)\n\t\t\t\tlrespostas[x] = new PcfRespostaIndicadores(lrespostas[x]);\n\t\tsto.set(\"respostas\", lrespostas);\n\n\t\tvar lrepform = new Array(20);\n\n\t\tfor (var x = 1; x < 20; x++) {\n\t\t\tlrepform[x] = new Array();\n\t\t}\n\n\t\tvar lformularios: FormularioPesquisa[] = Mentor.executaVisao(1521, \"\");\n\t\tfor (var x: number = 0; x < lformularios.length; x++) {\n\t\t\tlformularios[x] = new FormularioPesquisa(lformularios[x]);\n\t\t\tif(lformularios[x].questoes != null && lformularios[x].questoes.length > 0)\n\t\t\t\tlrepform[lformularios[x].tipo].push(lformularios[x]);\n\t\t}\n\n\t\tfor (var d = 0; d < lrepform[9].length; d++) {\n\t\t\tfor (var x = 1; x < 9; x++) {\n\t\t\t\tlrepform[x].push(lrepform[9][d]);\n\t\t\t}\n\t\t}\n\n\t\tfor (var d = 0; d < lrepform[10].length; d++) {\n\t\t\tfor (var x = 11; x < 20; x++) {\n\t\t\t\tlrepform[x].push(lrepform[10][d]);\n\t\t\t}\n\t\t}\n\n\t\tfor (var x = 1; x < 20; x++) {\n\t\t\tif (x != 9 && x != 10)\n\t\t\t\tsto.set(\"formularios\" + x, lrepform[x]);\n\t\t}\n\n\n\n\t\tvar planosVisitas: PcfPlanoVisita[] = Mentor.executaVisao(1518, \"varcodigo=\" + funcionario.codigo);\n\t\tvar criancasServidor: PcfCaracterizacaoCrianca[] = new Array();\n\t\tvar gestantesServidor: PcfCaracterizacaoGestante[] = new Array();\n\n\t\tif (planosVisitas != null)\n\t\t\tfor (var x = planosVisitas.length - 1; x >= 0; x--) {\n\t\t\t\tplanosVisitas[x] = new PcfPlanoVisita(planosVisitas[x]);\n\t\t\t\tif (planosVisitas[x].familias != null) {\n\t\t\t\t\tfor (var f = planosVisitas[x].familias.length - 1; f >= 0; f--) {\n\t\t\t\t\t\tif (planosVisitas[x].familias[f].familia != null) {\n\t\t\t\t\t\t\tif (planosVisitas[x].familias[f].familia.criancas != null)\n\t\t\t\t\t\t\t\tfor (var c = 0; c < planosVisitas[x].familias[f].familia.criancas.length; c++)\n\t\t\t\t\t\t\t\t\tcriancasServidor.push(planosVisitas[x].familias[f].familia.criancas[c]);\n\n\t\t\t\t\t\t\tif (planosVisitas[x].familias[f].familia.gestantes != null)\n\t\t\t\t\t\t\t\tfor (var c = 0; c < planosVisitas[x].familias[f].familia.gestantes.length; c++)\n\t\t\t\t\t\t\t\t\tgestantesServidor.push(planosVisitas[x].familias[f].familia.gestantes[c]);\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tplanosVisitas[x].familias.splice(f, 1);\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\tsto.set(\"planos\", planosVisitas);\n\n\t\tif (criancasServidor != null && criancasServidor.length > 0)\n\t\t\tsto.get(\"criancas\").then(criancas => {\n\t\t\t\tvar criancasLocal: PcfCaracterizacaoCrianca[] = criancas;\n\t\t\t\tif (criancasLocal == null)\n\t\t\t\t\tcriancasLocal = new Array();\n\n\t\t\t\tlet codigos: string = \"0\";\n\t\t\t\tfor (let c: number = 0; c < criancasServidor.length; c++) {\n\t\t\t\t\tlet achou: boolean = false;\n\t\t\t\t\tfor (let x: number = 0; x < criancasLocal.length; x++)\n\t\t\t\t\t\tif (criancasServidor[c].codigo == criancasLocal[x].codigo)\n\t\t\t\t\t\t\tachou = true;\n\t\t\t\t\tif (!achou)\n\t\t\t\t\t\tcodigos = codigos + \", \" + criancasServidor[c].codigo;\n\t\t\t\t}\n\n\t\t\t\tif (codigos != \"0\") {\n\t\t\t\t\tcriancasServidor = Mentor.executaVisao(1506, \"varcodigo=\" + codigos);\n\t\t\t\t\tfor (let c: number = 0; c < criancasServidor.length; c++) {\n\t\t\t\t\t\tcriancasLocal.push(new PcfCaracterizacaoCrianca(criancasServidor[c]));\n\t\t\t\t\t\tcriancasLocal[criancasLocal.length - 1].associadoCras.domicilioCras.planoVisita = this.achaPlanoVisitaCrianca(criancasServidor[c], planosVisitas);\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tsto.set(\"criancas\", criancasLocal);\n\n\t\t\t\t}\n\t\t\t});\n\n\t\tif (gestantesServidor != null && gestantesServidor.length > 0)\n\t\t\tsto.get(\"gestantes\").then(gestantes => {\n\t\t\t\tvar gestanteLocal: PcfCaracterizacaoGestante[] = gestantes;\n\t\t\t\tif (gestanteLocal == null)\n\t\t\t\t\tgestanteLocal = new Array();\n\n\t\t\t\tlet codigos: string = \"0\";\n\t\t\t\tfor (let c: number = 0; c < gestantesServidor.length; c++) {\n\t\t\t\t\tlet achou: boolean = false;\n\t\t\t\t\tfor (let x: number = 0; x < gestanteLocal.length; x++)\n\t\t\t\t\t\tif (gestantesServidor[c].codigo == gestanteLocal[x].codigo)\n\t\t\t\t\t\t\tachou = true;\n\t\t\t\t\tif (!achou)\n\t\t\t\t\t\tcodigos = codigos + \", \" + gestantesServidor[c].codigo;\n\t\t\t\t}\n\n\t\t\t\tif (codigos != \"0\") {\n\t\t\t\t\tgestantesServidor = Mentor.executaVisao(1519, \"varcodigo=\" + codigos);\n\t\t\t\t\tfor (let c: number = 0; c < gestantesServidor.length; c++) {\n\t\t\t\t\t\tgestanteLocal.push(new PcfCaracterizacaoGestante(gestantesServidor[c]));\n\n\t\t\t\t\t\tgestanteLocal[gestanteLocal.length - 1].associadoCras.domicilioCras.planoVisita = this.achaPlanoVisitaGestante(gestantesServidor[c], planosVisitas);\n\t\t\t\t\t}\n\n\n\t\t\t\t\tsto.set(\"gestantes\", gestanteLocal);\n\n\t\t\t\t}\n\n\n\n\t\t\t});\n\n\t\t//if (nav != null)\n\t\t//\tnav.pop();\n\t}\n\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}