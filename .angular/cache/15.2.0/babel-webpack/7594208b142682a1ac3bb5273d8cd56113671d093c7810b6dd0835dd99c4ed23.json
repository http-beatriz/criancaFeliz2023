{"ast":null,"code":"import _asyncToGenerator from \"/Users/erisveltonlima/Desktop/Projetos 2023/criancaFeliz2023/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.page.scss?ngResource\";\nimport { GlobalComponent } from './../../global/global.component';\nimport { Router } from '@angular/router';\nimport { Component } from '@angular/core';\nimport { Storage } from '@ionic/storage-angular';\nimport { AlertController } from '@ionic/angular';\nimport { Mentor } from '../../models/Mentor';\nimport { Funcionarios } from '../../models/Modelo';\nimport { servico } from '../../models/Servico';\nimport { Controlador } from '../../models/Controlador';\nimport { LoadingController } from '@ionic/angular';\nlet LoginPage = class LoginPage {\n  constructor(router, globalComponent, storage, loadingCtrl, alertController) {\n    this.router = router;\n    this.globalComponent = globalComponent;\n    this.storage = storage;\n    this.loadingCtrl = loadingCtrl;\n    this.alertController = alertController;\n    this.cpf = \"037.189.414-06\";\n    this.senha = \"Velton250380\";\n    this.load = null;\n    this.municipio = null;\n    this.logo = \"/assets/images/examples/carregamento.png\";\n    this.servidorLogado = null;\n    this.showSpinner = false;\n    this.ctrl = new Controlador();\n    this.criancas = new Array();\n    this.gestantes = new Array();\n    this.global = this.globalComponent;\n    loadingCtrl.create({\n      message: \"Conectando Servidor.\"\n    }).then(l => {\n      this.load = l;\n    });\n  }\n  presentAlert() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this.alertController.create({\n        header: 'Importante',\n        message: \"Para acessar o aplicativo, é preciso estar inscrito no Cadastro Único Federal Procure uma Unidade de Assistência Social (CRAS) ou a Central do Cadastro Único mais próxima.\",\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n  //alerta para informar o CPF\n  alertaCpf() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this2.alertController.create({\n        header: 'Importante',\n        message: \"Por favor, preencha seu CPF corretamente .\",\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n  //alerta para informar a senha\n  alertaSenha() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this3.alertController.create({\n        header: 'Importante',\n        message: \"Por favor, preencha sua data de nascimento.\",\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n  // form login\n  loginForm() {\n    //  console.log('Data Requerida: ', e.value);\n    if (this.cpf == '' || this.cpf == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha seu e-mail corretamente');\n      return this.alertaCpf();\n    } else if (this.senha == '' || this.senha == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha sua data de nascimento');\n      return this.alertaSenha();\n    } else {\n      this.load.present();\n      setTimeout(() => {\n        this.loginForm2();\n      }, 100);\n      return;\n    }\n  }\n  loginForm2() {\n    //  console.log('Data Requerida: ', e.value);\n    {\n      // tentar fazer login\n      var lServidor = Mentor.executaVisao(1171, \"varcpf=\" + this.cpf + \"&varsenha=\" + this.senha);\n      if (lServidor == null) {\n        var funcionario = new Funcionarios(lServidor);\n        this.storage.set(\"servidor\", funcionario);\n        this.load.dismiss();\n        alert(\"nenhum usuario encontrado\");\n        return;\n      }\n      servico.imagem;\n      this.storage.set(\"ultimoUsuario\", lServidor);\n      servico.usuarioLogado = lServidor;\n      let url = '/tabs/meus-dados';\n      this.storage.set('cpf', this.cpf);\n      this.load.dismiss();\n      this.router.navigateByUrl(url);\n    }\n  }\n  ionViewDidEnter() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      yield _this4.storage.create();\n      var licenca = yield _this4.storage.get('licenca');\n      //alert(licenca);\n      if (licenca == null) {\n        _this4.router.navigateByUrl('selecao-municipio');\n      } else {\n        Mentor.UrlRequest = \"https://app.conectasuas.com.br/assistenciaSocial/\";\n        //\"http://app.vvision.com.br:8080/assistenciaSocial/\";\n        var licencas = Mentor.executaVisao(2632, \"varcodigo=\" + licenca.estado.codigo + \"&varsistema=\" + licenca.sistema + \"&varnomeMunicipio=\" + licenca.nomeMunicipio);\n        if (licencas == null || licencas.length != 1) _this4.router.navigateByUrl('selecao-municipio');else {\n          licenca = licencas[0];\n          _this4.storage.set(\"licenca\", licenca);\n        }\n      }\n      Mentor.UrlRequest = licenca.urlServidor;\n      _this4.logo = licenca.logo;\n      _this4.storage.get(\"ultimoUsuario\").then(usu => {\n        if (usu == null) return _this4.presentAlert();\n      });\n    })();\n  }\n  navegacao() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      yield _this5.storage.create();\n      yield _this5.storage.remove(\"licenca\");\n      _this5.router.navigate([\"selecao-municipio\"]);\n    })();\n  }\n};\nLoginPage.ctorParameters = () => [{\n  type: Router\n}, {\n  type: GlobalComponent\n}, {\n  type: Storage\n}, {\n  type: LoadingController\n}, {\n  type: AlertController\n}];\nLoginPage = __decorate([Component({\n  selector: 'app-login',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginPage);\nexport { LoginPage };","map":{"version":3,"mappings":"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","names":["GlobalComponent","Router","Component","Storage","AlertController","Mentor","Funcionarios","servico","Controlador","LoadingController","LoginPage","constructor","router","globalComponent","storage","loadingCtrl","alertController","Array","global","create","message","then","l","load","presentAlert","alert","header","buttons","present","alertaCpf","alertaSenha","loginForm","cpf","undefined","senha","setTimeout","loginForm2","lServidor","executaVisao","funcionario","set","dismiss","imagem","usuarioLogado","url","navigateByUrl","ionViewDidEnter","licenca","get","UrlRequest","licencas","estado","codigo","sistema","nomeMunicipio","length","urlServidor","logo","usu","navegacao","remove","navigate","selector","template"],"sourceRoot":"","sources":["/Users/erisveltonlima/Desktop/Projetos 2023/criancaFeliz2023/src/app/pages/login/login.page.ts"],"sourcesContent":["import { GlobalComponent } from './../../global/global.component';\nimport { Router } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { FormArray, FormGroup } from '@angular/forms';\nimport { Storage } from '@ionic/storage-angular';\nimport { AlertController } from '@ionic/angular';\nimport { Mentor } from '../../models/Mentor';\nimport { Funcionarios, PcfPlanoVisita, PcfCaracterizacaoCrianca, DomicilioCras, PcfCaracterizacaoGestante, licencaMunicipioSistema } from '../../models/Modelo'\nimport { servico } from '../../models/Servico'\nimport { Controlador } from '../../models/Controlador';\n\nimport { LoadingController } from '@ionic/angular';\n\n\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage {\n\n\n\n  cpf: String = \"037.189.414-06\";\n  senha: String = \"Velton250380\";\n\n  load: any = null;\n\n  global: any;\n  municipio: licencaMunicipioSistema = null;\n\n  logo: String = \"/assets/images/examples/carregamento.png\";\n  simnao: number;\n  servidorLogado: any = null;\n  showSpinner: boolean = false;\n  ctrl: Controlador = new Controlador();\n  enviaDados: boolean;\n  plano: PcfPlanoVisita;\n  criancas: PcfCaracterizacaoCrianca[] = new Array();\n  gestantes: PcfCaracterizacaoGestante[] = new Array();\n\n  constructor(\n    private router: Router,\n    public globalComponent: GlobalComponent,\n    private storage: Storage,\n    private loadingCtrl: LoadingController,\n    private alertController: AlertController,\n  ) {\n\n    this.global = this.globalComponent;\n    loadingCtrl.create({\n      message: \"Conectando Servidor.\"\n    }).then((l => { this.load = l }))\n\n\n\n  }\n\n\n  async presentAlert() {\n    const alert = await this.alertController.create({\n      header: 'Importante',\n      message: \"Para acessar o aplicativo, é preciso estar inscrito no Cadastro Único Federal Procure uma Unidade de Assistência Social (CRAS) ou a Central do Cadastro Único mais próxima.\",\n      buttons: ['OK']\n    });\n\n\n\n    await alert.present();\n  }\n\n  //alerta para informar o CPF\n  async alertaCpf() {\n    const alert = await this.alertController.create({\n      header: 'Importante',\n      message: \"Por favor, preencha seu CPF corretamente .\",\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  //alerta para informar a senha\n  async alertaSenha() {\n    const alert = await this.alertController.create({\n      header: 'Importante',\n      message: \"Por favor, preencha sua data de nascimento.\",\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n  // form login\n\n  loginForm() {\n    //  console.log('Data Requerida: ', e.value);\n\n    if (this.cpf == '' || this.cpf == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha seu e-mail corretamente');\n      return this.alertaCpf();\n    } else if (this.senha == '' || this.senha == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha sua data de nascimento');\n      return this.alertaSenha();\n    } else {\n\n\n      this.load.present();\n      setTimeout(() => {\n        this.loginForm2();\n      }, 100);\n\n      return;\n    }\n  }\n\n\n  loginForm2() {\n    //  console.log('Data Requerida: ', e.value);\n\n    {\n      // tentar fazer login\n\n      var lServidor = Mentor.executaVisao(1171, \"varcpf=\" + this.cpf + \"&varsenha=\" + this.senha);\n   \n      if (lServidor == null) {\n\n        var funcionario: Funcionarios = new Funcionarios(lServidor);\n\n        this.storage.set(\"servidor\", funcionario);\n\n        this.load.dismiss();\n        alert(\"nenhum usuario encontrado\")\n        return;\n      }\n\n\n      servico.imagem\n\n      this.storage.set(\"ultimoUsuario\", lServidor);\n      servico.usuarioLogado = lServidor;\n\n     \n\n\n      let url = '/tabs/meus-dados';\n      this.storage.set('cpf', this.cpf);\n\n\n\n      this.load.dismiss();\n\n      this.router.navigateByUrl(url);\n    }\n  }\n\n\n\n  async ionViewDidEnter() {\n    await this.storage.create();\n    var licenca: licencaMunicipioSistema = await this.storage.get('licenca');\n    //alert(licenca);\n    if (licenca == null) {\n      this.router.navigateByUrl('selecao-municipio');\n    }\n    else {\n      Mentor.UrlRequest = \"https://app.conectasuas.com.br/assistenciaSocial/\"\n      //\"http://app.vvision.com.br:8080/assistenciaSocial/\";\n      var licencas = Mentor.executaVisao(2632, \"varcodigo=\" + licenca.estado.codigo + \"&varsistema=\" + licenca.sistema + \"&varnomeMunicipio=\" + licenca.nomeMunicipio);\n      if (licencas == null || licencas.length != 1)\n        this.router.navigateByUrl('selecao-municipio');\n      else {\n        licenca = licencas[0];\n        this.storage.set(\"licenca\", licenca);\n      }\n\n    }\n\n    Mentor.UrlRequest = licenca.urlServidor;\n    this.logo = licenca.logo;\n\n    this.storage.get(\"ultimoUsuario\").then(usu => {\n      if (usu == null)\n        return this.presentAlert();\n\n    });\n  }\n\n\n  async navegacao() {\n    await this.storage.create();\n    await this.storage.remove(\"licenca\");\n    this.router.navigate([\"selecao-municipio\"]);\n\n  }\n\n\n  //cpf() {\n  //  this.router.navigate(['/tabs/meus-dados']);\n  // }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}