{"ast":null,"code":"import _asyncToGenerator from \"/Users/erisveltonlima/Desktop/Projetos 2023/criancaFeliz2023/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.page.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.page.scss?ngResource\";\nimport { GlobalComponent } from './../../global/global.component';\nimport { Router } from '@angular/router';\nimport { Component } from '@angular/core';\nimport { Storage } from '@ionic/storage-angular';\nimport { AlertController } from '@ionic/angular';\nimport { Mentor } from '../../models/Mentor';\nimport { Funcionarios, PcfPlanoVisita, PcfCaracterizacaoCrianca, DomicilioCras, PcfCaracterizacaoGestante } from '../../models/Modelo';\nimport { servico } from '../../models/Servico';\nimport { Controlador } from '../../models/Controlador';\nimport { LoadingController } from '@ionic/angular';\nlet LoginPage = class LoginPage {\n  constructor(router, globalComponent, storage, loadingCtrl, alertController) {\n    this.router = router;\n    this.globalComponent = globalComponent;\n    this.storage = storage;\n    this.loadingCtrl = loadingCtrl;\n    this.alertController = alertController;\n    this.cpf = \"037.189.414-06\";\n    this.senha = \"Velton250380\";\n    this.load = null;\n    this.municipio = null;\n    this.logo = \"/assets/images/examples/carregamento.png\";\n    this.servidorLogado = null;\n    this.ctrl = new Controlador();\n    this.criancas = new Array();\n    this.gestantes = new Array();\n    this.global = this.globalComponent;\n    loadingCtrl.create({\n      message: \"Conectando Servidor.\"\n    }).then(l => {\n      this.load = l;\n    });\n    this.storage.get(\"motorista\").then(motorista => this.servidorLogado = motorista);\n    this.simnao = 0;\n    servico.plano;\n    servico.enviaDados;\n  }\n  //alerta login\n  presentAlert() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this.alertController.create({\n        header: 'Importante',\n        message: \"Para acessar o aplicativo, é preciso estar inscrito no Cadastro Único Federal Procure uma Unidade de Assistência Social (CRAS) ou a Central do Cadastro Único mais próxima.\",\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n  //alerta para informar o CPF\n  alertaCpf() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this2.alertController.create({\n        header: 'Importante',\n        message: \"Por favor, preencha seu CPF corretamente .\",\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n  //alerta para informar a senha\n  alertaSenha() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const alert = yield _this3.alertController.create({\n        header: 'Importante',\n        message: \"Por favor, preencha sua data de nascimento.\",\n        buttons: ['OK']\n      });\n      yield alert.present();\n    })();\n  }\n  //comando para limpar dados\n  limpaTudo() {\n    this.storage.remove(\"licenca\");\n    this.storage.remove(\"gestantes\");\n    this.storage.remove(\"criancas\");\n    this.storage.remove(\"planos\");\n    alert(\"tudo removido\");\n    this.router.navigate([\"selecao-municipio\"]);\n  }\n  // form login\n  loginForm() {\n    //  console.log('Data Requerida: ', e.value);\n    if (this.cpf == '' || this.cpf == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha seu e-mail corretamente');\n      return this.alertaCpf();\n    } else if (this.senha == '' || this.senha == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha sua data de nascimento');\n      return this.alertaSenha();\n    } else {\n      this.load.present();\n      setTimeout(() => {\n        this.loginForm2();\n      }, 100);\n      return;\n    }\n  }\n  loginForm2() {\n    var lServidor = Mentor.executaVisao(1171, \"varcpf=\" + this.cpf + \"&varsenha=\" + this.senha);\n    if (lServidor == null) {\n      var funcionario = new Funcionarios(lServidor);\n      this.storage.set(\"servidor\", funcionario);\n      if (!this.enviaDados) this.ctrl.sincronizaDadosServidor(this.storage, funcionario, this.router);else {\n        for (var x = 0; x < this.plano.domicilios.length; x++) {\n          for (var c = 0; c < this.plano.domicilios[x].criancas.length; c++) {\n            this.plano.domicilios[x].criancas[c].associadoCras.domicilioCras = null;\n            var crianca = new PcfCaracterizacaoCrianca(this.plano.domicilios[x].criancas[c]);\n            crianca.domicilioCras = new DomicilioCras(null);\n            crianca.domicilioCras.codigo = this.plano.domicilios[x].codigo;\n            this.ctrl.inicializaCrianca(crianca, funcionario);\n            if (crianca.diagnosticos_0_28 != null) this.ctrl.inicializaDiagnostico(crianca.diagnosticos_0_28, funcionario);\n            if (crianca.diagnosticos_0_3 != null) this.ctrl.inicializaDiagnostico(crianca.diagnosticos_0_3, funcionario);\n            if (crianca.diagnostico_3_6 != null) this.ctrl.inicializaDiagnostico(crianca.diagnostico_3_6, funcionario);\n            if (crianca.diagnostico_6_9 != null) this.ctrl.inicializaDiagnostico(crianca.diagnostico_6_9, funcionario);\n            if (crianca.diagnostico_9_12 != null) this.ctrl.inicializaDiagnostico(crianca.diagnostico_9_12, funcionario);\n            if (crianca.diagnostico_12_18 != null) this.ctrl.inicializaDiagnostico(crianca.diagnostico_12_18, funcionario);\n            if (crianca.diagnostico_18_24 != null) this.ctrl.inicializaDiagnostico(crianca.diagnostico_18_24, funcionario);\n            if (crianca.diagnosticos_2_3 != null) this.ctrl.inicializaDiagnostico(crianca.diagnosticos_2_3, funcionario);\n            if (crianca.avaliacao_0_3 != null) this.ctrl.inicializaAvaliacao(crianca.avaliacao_0_3, funcionario);\n            if (crianca.avaliacao_3_6 != null) this.ctrl.inicializaDiagnostico(crianca.avaliacao_3_6, funcionario);\n            if (crianca.avaliacao_6_9 != null) this.ctrl.inicializaDiagnostico(crianca.avaliacao_6_9, funcionario);\n            if (crianca.avaliacao_9_12 != null) this.ctrl.inicializaDiagnostico(crianca.avaliacao_9_12, funcionario);\n            if (crianca.avaliacao_12_18 != null) this.ctrl.inicializaAvaliacao(crianca.avaliacao_12_18, funcionario);\n            if (crianca.avaliacao_18_24 != null) this.ctrl.inicializaDiagnostico(crianca.avaliacao_18_24, funcionario);\n            if (crianca.avaliacao_2_3 != null) this.ctrl.inicializaDiagnostico(crianca.avaliacao_2_3, funcionario);\n            if (crianca.formulariosApp != null) for (var f = 0; f < crianca.formulariosApp.length; f++) {\n              for (var r = crianca.formulariosApp[f].respostas.length - 1; r >= 0; r--) {\n                if (crianca.formulariosApp[f].respostas[r].alternativaResposta != null && (crianca.formulariosApp[f].respostas[r].alternativaResposta.codigo == 0 || typeof crianca.formulariosApp[f].respostas[r].alternativaResposta.codigo == \"undefined\")) crianca.formulariosApp[f].respostas[r].alternativaResposta = null;\n              }\n            }\n            this.plano.domicilios[x].criancas[c] = crianca;\n            this.criancas.push(crianca);\n          }\n          for (var c = 0; c < this.plano.domicilios[x].gestantes.length; c++) {\n            this.plano.domicilios[x].gestantes[c].associadoCras.domicilioCras = null;\n            var gestante = new PcfCaracterizacaoGestante(this.plano.domicilios[x].gestantes[c]);\n            gestante.domicilioCras = new DomicilioCras(null);\n            gestante.domicilioCras.codigo = this.plano.domicilios[x].codigo;\n            this.ctrl.inicializaCrianca(gestante, funcionario);\n            if (gestante.formularios != null) for (var f = 0; f < gestante.formularios.length; f++) {\n              for (var r = gestante.formularios[f].respostas.length - 1; r >= 0; r--) {\n                if (gestante.formularios[f].respostas[r].alternativaResposta != null && (gestante.formularios[f].respostas[r].alternativaResposta.codigo == 0 || typeof crianca.formulariosApp[f].respostas[r].alternativaResposta.codigo == \"undefined\")) gestante.formularios[f].respostas[r].alternativaResposta = null;\n              }\n            }\n            this.plano.domicilios[x].gestantes[c] = gestante;\n            this.gestantes.push(gestante);\n          }\n          Mentor.rodaTransacaoFromObjeto(964, \"objCrianca\", this.plano.domicilios[x].criancas, true);\n          Mentor.rodaTransacaoFromObjeto(964, \"objetosGestantes\", this.plano.domicilios[x].gestantes, true);\n          //objetosGestantes\n        }\n\n        var plano = new PcfPlanoVisita(null);\n        plano.codigo = this.plano.codigo;\n        plano.dataVisitaExecutada = new Date();\n        plano.flagVisitaExecutada = 1;\n        Mentor.rodaTransacaoFromObjeto(964, \"objPlanoVisita\", plano, true);\n        this.storage.get(\"planos\").then(planos => {\n          for (var p = planos.length - 1; p >= 0; p--) if (planos[p].codigo == this.plano.codigo) planos.splice(p), 1;\n          this.storage.set(\"planos\", planos);\n          this.storage.get(\"criancas\").then(criancas => {\n            var lcriancas = criancas;\n            if (lcriancas != null) for (var c = lcriancas.length - 1; c >= 0; c--) {\n              var achou = false;\n              for (var c2 = 0; c2 < this.criancas.length && !achou; c2++) {\n                if (this.criancas[c2].codigo == lcriancas[c].codigo) achou = true;\n              }\n              if (achou) lcriancas.splice(c, 1);\n            }\n            this.storage.set(\"criancas\", lcriancas);\n            this.storage.get(\"gestantes\").then(gestantes => {\n              var lgestantes = gestantes;\n              if (lgestantes != null) {\n                for (var c = lgestantes.length - 1; c >= 0; c--) {\n                  var achou = false;\n                  for (var c2 = 0; c2 < this.gestantes.length && !achou; c2++) {\n                    if (this.gestantes[c2].codigo == lgestantes[c].codigo) achou = true;\n                  }\n                  if (achou) lgestantes.splice(c, 1);\n                }\n              }\n              this.storage.set(\"gestantes\", lgestantes);\n              this.router.navigateByUrl(\"/\");\n            });\n          });\n        });\n      }\n      servico.imagem;\n      this.storage.set(\"ultimoUsuario\", lServidor);\n      servico.usuarioLogado = lServidor;\n      let url = '/tabs/meus-dados';\n      this.storage.set('cpf', this.cpf);\n      this.load.dismiss();\n      this.router.navigateByUrl(url);\n    } else {\n      alert(\"Usuário ou Senha incorreto!\");\n      return;\n    }\n  }\n  ionViewDidEnter() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      yield _this4.storage.create();\n      var licenca = yield _this4.storage.get('licenca');\n      //alert(licenca);\n      if (licenca == null) {\n        _this4.router.navigateByUrl('selecao-municipio');\n      } else {\n        Mentor.UrlRequest = \"https://app.conectasuas.com.br/assistenciaSocial/\";\n        //\"http://app.vvision.com.br:8080/assistenciaSocial/\";\n        var licencas = Mentor.executaVisao(2632, \"varcodigo=\" + licenca.estado.codigo + \"&varsistema=\" + licenca.sistema + \"&varnomeMunicipio=\" + licenca.nomeMunicipio);\n        if (licencas == null || licencas.length != 1) _this4.router.navigateByUrl('selecao-municipio');else {\n          licenca = licencas[0];\n          _this4.storage.set(\"licenca\", licenca);\n        }\n      }\n      Mentor.UrlRequest = licenca.urlServidor;\n      _this4.logo = licenca.logo;\n      _this4.storage.get(\"ultimoUsuario\").then(usu => {\n        if (usu == null) return _this4.presentAlert();\n      });\n    })();\n  }\n  navegacao() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      yield _this5.storage.create();\n      yield _this5.storage.remove(\"licenca\");\n      _this5.router.navigate([\"selecao-municipio\"]);\n    })();\n  }\n};\nLoginPage.ctorParameters = () => [{\n  type: Router\n}, {\n  type: GlobalComponent\n}, {\n  type: Storage\n}, {\n  type: LoadingController\n}, {\n  type: AlertController\n}];\nLoginPage = __decorate([Component({\n  selector: 'app-login',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginPage);\nexport { LoginPage };","map":{"version":3,"mappings":"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","names":["GlobalComponent","Router","Component","Storage","AlertController","Mentor","Funcionarios","PcfPlanoVisita","PcfCaracterizacaoCrianca","DomicilioCras","PcfCaracterizacaoGestante","servico","Controlador","LoadingController","LoginPage","constructor","router","globalComponent","storage","loadingCtrl","alertController","Array","global","create","message","then","l","load","get","motorista","servidorLogado","simnao","plano","enviaDados","presentAlert","alert","header","buttons","present","alertaCpf","alertaSenha","limpaTudo","remove","navigate","loginForm","cpf","undefined","senha","setTimeout","loginForm2","lServidor","executaVisao","funcionario","set","ctrl","sincronizaDadosServidor","x","domicilios","length","c","criancas","associadoCras","domicilioCras","crianca","codigo","inicializaCrianca","diagnosticos_0_28","inicializaDiagnostico","diagnosticos_0_3","diagnostico_3_6","diagnostico_6_9","diagnostico_9_12","diagnostico_12_18","diagnostico_18_24","diagnosticos_2_3","avaliacao_0_3","inicializaAvaliacao","avaliacao_3_6","avaliacao_6_9","avaliacao_9_12","avaliacao_12_18","avaliacao_18_24","avaliacao_2_3","formulariosApp","f","r","respostas","alternativaResposta","push","gestantes","gestante","formularios","rodaTransacaoFromObjeto","dataVisitaExecutada","Date","flagVisitaExecutada","planos","p","splice","lcriancas","achou","c2","lgestantes","navigateByUrl","imagem","usuarioLogado","url","dismiss","ionViewDidEnter","licenca","UrlRequest","licencas","estado","sistema","nomeMunicipio","urlServidor","logo","usu","navegacao","selector","template"],"sourceRoot":"","sources":["/Users/erisveltonlima/Desktop/Projetos 2023/criancaFeliz2023/src/app/pages/login/login.page.ts"],"sourcesContent":["import { GlobalComponent } from './../../global/global.component';\nimport { Router } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { Storage } from '@ionic/storage-angular';\nimport { AlertController } from '@ionic/angular';\nimport { Mentor } from '../../models/Mentor';\nimport { Funcionarios, PcfPlanoVisita, PcfCaracterizacaoCrianca, DomicilioCras, PcfCaracterizacaoGestante, licencaMunicipioSistema } from '../../models/Modelo'\nimport { servico } from '../../models/Servico'\nimport { Controlador } from '../../models/Controlador';\n\nimport { LoadingController } from '@ionic/angular';\n\n\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage {\n\n\n\n  cpf: String = \"037.189.414-06\";\n  senha: String = \"Velton250380\";\n\n  load: any = null;\n\n  global: any;\n  municipio: licencaMunicipioSistema = null;\n\n  logo: String = \"/assets/images/examples/carregamento.png\";\n\n  simnao: number;\n  servidorLogado: any = null;\n\n  ctrl: Controlador = new Controlador();\n  enviaDados: boolean;\n  plano: PcfPlanoVisita;\n\n  criancas: PcfCaracterizacaoCrianca[] = new Array();\n  gestantes: PcfCaracterizacaoGestante[] = new Array();\n\n  constructor(\n    private router: Router,\n    public globalComponent: GlobalComponent,\n    private storage: Storage,\n    private loadingCtrl: LoadingController,\n    private alertController: AlertController,\n  ) {\n\n    this.global = this.globalComponent;\n    loadingCtrl.create({\n      message: \"Conectando Servidor.\"\n    }).then((l => { this.load = l }))\n\n\n    this.storage.get(\"motorista\").then(motorista => this.servidorLogado = motorista);\n    this.simnao = 0;\n\n\n    servico.plano;\n\n    servico.enviaDados;\n  }\n\n  //alerta login\n  async presentAlert() {\n    const alert = await this.alertController.create({\n      header: 'Importante',\n      message: \"Para acessar o aplicativo, é preciso estar inscrito no Cadastro Único Federal Procure uma Unidade de Assistência Social (CRAS) ou a Central do Cadastro Único mais próxima.\",\n      buttons: ['OK']\n    });\n\n\n\n    await alert.present();\n  }\n\n  //alerta para informar o CPF\n  async alertaCpf() {\n    const alert = await this.alertController.create({\n      header: 'Importante',\n      message: \"Por favor, preencha seu CPF corretamente .\",\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  //alerta para informar a senha\n  async alertaSenha() {\n    const alert = await this.alertController.create({\n      header: 'Importante',\n      message: \"Por favor, preencha sua data de nascimento.\",\n      buttons: ['OK']\n    });\n\n    await alert.present();\n  }\n\n  //comando para limpar dados\n\n  limpaTudo() {\n    this.storage.remove(\"licenca\");\n    this.storage.remove(\"gestantes\");\n    this.storage.remove(\"criancas\");\n    this.storage.remove(\"planos\");\n\n\n    alert(\"tudo removido\");\n    this.router.navigate([\"selecao-municipio\"]);\n  }\n  // form login\n\n  loginForm() {\n    //  console.log('Data Requerida: ', e.value);\n\n    if (this.cpf == '' || this.cpf == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha seu e-mail corretamente');\n      return this.alertaCpf();\n    } else if (this.senha == '' || this.senha == undefined) {\n      //this.globalComponent.loadToast('Por favor, preencha sua data de nascimento');\n      return this.alertaSenha();\n    } else {\n\n\n      this.load.present();\n      setTimeout(() => {\n        this.loginForm2();\n      }, 100);\n\n      return;\n    }\n  }\n\n\n  loginForm2() {\n    var lServidor = Mentor.executaVisao(1171, \"varcpf=\" + this.cpf + \"&varsenha=\" + this.senha);\n\n    if (lServidor == null) {\n\n      var funcionario: Funcionarios = new Funcionarios(lServidor);\n\n      this.storage.set(\"servidor\", funcionario);\n\n      if (!this.enviaDados)\n        this.ctrl.sincronizaDadosServidor(this.storage, funcionario, this.router);\n      else {\n        for (var x = 0; x < this.plano.domicilios.length; x++) {\n          for (var c = 0; c < this.plano.domicilios[x].criancas.length; c++) {\n            this.plano.domicilios[x].criancas[c].associadoCras.domicilioCras = null;\n            var crianca = new PcfCaracterizacaoCrianca(this.plano.domicilios[x].criancas[c]);\n            crianca.domicilioCras = new DomicilioCras(null);\n            crianca.domicilioCras.codigo = this.plano.domicilios[x].codigo;\n\n            this.ctrl.inicializaCrianca(crianca, funcionario);\n\n            if (crianca.diagnosticos_0_28 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnosticos_0_28, funcionario);\n            if (crianca.diagnosticos_0_3 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnosticos_0_3, funcionario);\n            if (crianca.diagnostico_3_6 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnostico_3_6, funcionario);\n            if (crianca.diagnostico_6_9 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnostico_6_9, funcionario);\n            if (crianca.diagnostico_9_12 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnostico_9_12, funcionario);\n            if (crianca.diagnostico_12_18 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnostico_12_18, funcionario);\n            if (crianca.diagnostico_18_24 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnostico_18_24, funcionario);\n            if (crianca.diagnosticos_2_3 != null)\n              this.ctrl.inicializaDiagnostico(crianca.diagnosticos_2_3, funcionario);\n\n\n\n            if (crianca.avaliacao_0_3 != null)\n              this.ctrl.inicializaAvaliacao(crianca.avaliacao_0_3, funcionario);\n            if (crianca.avaliacao_3_6 != null)\n              this.ctrl.inicializaDiagnostico(crianca.avaliacao_3_6, funcionario);\n            if (crianca.avaliacao_6_9 != null)\n              this.ctrl.inicializaDiagnostico(crianca.avaliacao_6_9, funcionario);\n            if (crianca.avaliacao_9_12 != null)\n              this.ctrl.inicializaDiagnostico(crianca.avaliacao_9_12, funcionario);\n            if (crianca.avaliacao_12_18 != null)\n              this.ctrl.inicializaAvaliacao(crianca.avaliacao_12_18, funcionario);\n            if (crianca.avaliacao_18_24 != null)\n              this.ctrl.inicializaDiagnostico(crianca.avaliacao_18_24, funcionario);\n            if (crianca.avaliacao_2_3 != null)\n              this.ctrl.inicializaDiagnostico(crianca.avaliacao_2_3, funcionario);\n\n\n            if (crianca.formulariosApp != null)\n              for (var f = 0; f < crianca.formulariosApp.length; f++) {\n                for (var r = crianca.formulariosApp[f].respostas.length - 1; r >= 0; r--) {\n                  if (crianca.formulariosApp[f].respostas[r].alternativaResposta != null && (crianca.formulariosApp[f].respostas[r].alternativaResposta.codigo == 0 || typeof (crianca.formulariosApp[f].respostas[r].alternativaResposta.codigo) == \"undefined\"))\n                    crianca.formulariosApp[f].respostas[r].alternativaResposta = null;\n\n\n                }\n\n              }\n\n            this.plano.domicilios[x].criancas[c] = crianca;\n\n            this.criancas.push(crianca);\n\n          }\n\n\n          for (var c = 0; c < this.plano.domicilios[x].gestantes.length; c++) {\n            this.plano.domicilios[x].gestantes[c].associadoCras.domicilioCras = null;\n            var gestante = new PcfCaracterizacaoGestante(this.plano.domicilios[x].gestantes[c]);\n            gestante.domicilioCras = new DomicilioCras(null);\n            gestante.domicilioCras.codigo = this.plano.domicilios[x].codigo;\n\n            this.ctrl.inicializaCrianca(gestante, funcionario);\n\n\n\n            if (gestante.formularios != null)\n              for (var f = 0; f < gestante.formularios.length; f++) {\n                for (var r = gestante.formularios[f].respostas.length - 1; r >= 0; r--) {\n                  if (gestante.formularios[f].respostas[r].alternativaResposta != null && (gestante.formularios[f].respostas[r].alternativaResposta.codigo == 0 || typeof (crianca.formulariosApp[f].respostas[r].alternativaResposta.codigo) == \"undefined\"))\n                    gestante.formularios[f].respostas[r].alternativaResposta = null;\n\n\n                }\n              }\n\n            this.plano.domicilios[x].gestantes[c] = gestante;\n            this.gestantes.push(gestante);\n\n\n          }\n\n\n          Mentor.rodaTransacaoFromObjeto(964, \"objCrianca\", this.plano.domicilios[x].criancas, true);\n          Mentor.rodaTransacaoFromObjeto(964, \"objetosGestantes\", this.plano.domicilios[x].gestantes, true);\n          //objetosGestantes\n        }\n\n        var plano = new PcfPlanoVisita(null)\n        plano.codigo = this.plano.codigo;\n\n        plano.dataVisitaExecutada = new Date();\n        plano.flagVisitaExecutada = 1;\n        Mentor.rodaTransacaoFromObjeto(964, \"objPlanoVisita\", plano, true);\n\n        this.storage.get(\"planos\").then(planos => {\n\n          for (var p = planos.length - 1; p >= 0; p--)\n            if (planos[p].codigo == this.plano.codigo)\n              planos.splice(p), 1;\n          this.storage.set(\"planos\", planos);\n\n          this.storage.get(\"criancas\").then(criancas => {\n            var lcriancas: PcfCaracterizacaoCrianca[] = criancas;\n            if (lcriancas != null)\n              for (var c = lcriancas.length - 1; c >= 0; c--) {\n                var achou: boolean = false\n                for (var c2 = 0; c2 < this.criancas.length && !achou; c2++) {\n                  if (this.criancas[c2].codigo == lcriancas[c].codigo)\n                    achou = true;\n                }\n                if (achou)\n                  lcriancas.splice(c, 1);\n              }\n\n            this.storage.set(\"criancas\", lcriancas);\n\n            this.storage.get(\"gestantes\").then(gestantes => {\n              var lgestantes: PcfCaracterizacaoGestante[] = gestantes;\n              if (lgestantes != null) {\n                for (var c = lgestantes.length - 1; c >= 0; c--) {\n                  var achou: boolean = false\n                  for (var c2 = 0; c2 < this.gestantes.length && !achou; c2++) {\n                    if (this.gestantes[c2].codigo == lgestantes[c].codigo)\n                      achou = true;\n                  }\n                  if (achou)\n                    lgestantes.splice(c, 1);\n                }\n              }\n\n\n              this.storage.set(\"gestantes\", lgestantes);\n\n              this.router.navigateByUrl(\"/\");\n\n            })\n\n          })\n        })\n\n      }\n\n\n\n      servico.imagem\n\n      this.storage.set(\"ultimoUsuario\", lServidor);\n      servico.usuarioLogado = lServidor;\n\n\n\n      let url = '/tabs/meus-dados';\n      this.storage.set('cpf', this.cpf);\n\n\n\n      this.load.dismiss();\n\n      this.router.navigateByUrl(url);\n      \n    } else {\n      alert(\"Usuário ou Senha incorreto!\");\n      return;\n    }\n\n\n  }\n\n\n\n\n\n  async ionViewDidEnter() {\n    await this.storage.create();\n    var licenca: licencaMunicipioSistema = await this.storage.get('licenca');\n    //alert(licenca);\n    if (licenca == null) {\n      this.router.navigateByUrl('selecao-municipio');\n    }\n    else {\n      Mentor.UrlRequest = \"https://app.conectasuas.com.br/assistenciaSocial/\"\n      //\"http://app.vvision.com.br:8080/assistenciaSocial/\";\n      var licencas = Mentor.executaVisao(2632, \"varcodigo=\" + licenca.estado.codigo + \"&varsistema=\" + licenca.sistema + \"&varnomeMunicipio=\" + licenca.nomeMunicipio);\n      if (licencas == null || licencas.length != 1)\n        this.router.navigateByUrl('selecao-municipio');\n      else {\n        licenca = licencas[0];\n        this.storage.set(\"licenca\", licenca);\n      }\n\n    }\n\n    Mentor.UrlRequest = licenca.urlServidor;\n    this.logo = licenca.logo;\n\n    this.storage.get(\"ultimoUsuario\").then(usu => {\n      if (usu == null)\n        return this.presentAlert();\n\n    });\n  }\n\n\n  async navegacao() {\n    await this.storage.create();\n    await this.storage.remove(\"licenca\");\n    this.router.navigate([\"selecao-municipio\"]);\n\n  }\n\n\n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}